@{
    ViewBag.Title = "AcceptTest";
    Layout = "~/Views/Shared/_MainLayout.cshtml";
}
@model AsiaLabv1.Models.PatientModel
@section Banner
{
    <div class="banner">

        <h2>
            <a href="index.html">Home</a>
            <i class="fa fa-angle-right"></i>
            <span>Accept Test</span>
        </h2>
    </div>
}

@*---------Start Side Navigation Menu-----------*@

@section NavMenu
{
    <li>
        <a href="@Url.Action("ReceptionistDashboard","Main")" class=" hvr-bounce-to-right"><i class="fa fa-dashboard nav_icon "></i><span class="nav-label">Dashboard</span> </a>
    </li>



    <li><a href="@Url.Action("RegisterPatient", "Reciptionist" )" class=" hvr-bounce-to-right"><i class="fa fa-desktop nav_icon"></i>Accept Test</a></li>
    <li><a href="@Url.Action("PrintReport", "Reciptionist")" class=" hvr-bounce-to-right"><i class="fa fa-file-text-o nav_icon"></i>Print Report</a></li>




}
@*------------ End Side Navigation Menu----------*@


@*------------- Start Main Content Code-------------*@

<div class="grid-form">

    <!----->
    <!---->
    <div class="grid-form1">
        <h3>Accept Test Form</h3>
        <div class="tab-content">

            <div class="tab-pane active" id="horizontal-form">

                <form class="form-horizontal">

                    <div class="form-group">
                        <div class="col-sm-8">
                            <h4>Patient Information</h4>
                        </div>

                    </div>
                    <br />
                    <div class="form-group">
                        @Html.LabelFor(model=>model.Name, new { @class = "col-sm-2 control-label" })
                        <div class="col-sm-8">
                            @Html.TextBoxFor(model => model.Name, new { @class = "form-control1" })
                        </div>
                        <!--<div class="col-sm-2">
                            <p class="help-block">Your help text!</p>
                        </div>-->
                    </div>

                    <div class="form-group">
                        @Html.LabelFor(model=>model.GenderId, new { @class = "col-sm-2 control-label" })
                        
                        <div class="col-sm-8">
                            @Html.DropDownListFor(model => model.GenderId, Model.Genders, new { @class = "form-control1" })
                          

                        </div>
                    </div>
                    <div class="form-group">
                        @Html.LabelFor(model=>model.DateofBirth, new { @class = "col-sm-2 control-label" })
                       
                        <div class="col-sm-8">
                            <input type="date" id="DateOfBirth" class="form-control1" />
                        </div>
                        <!--<div class="col-sm-2">
                            <p class="help-block">Your help text!</p>
                        </div>-->
                    </div>
                    <div class="form-group">
                        @Html.LabelFor(model=>model.PhoneNumber, new { @class = "col-sm-2 control-label" })
                        
                        <div class="col-sm-8">
                            @Html.TextBoxFor(model => model.PhoneNumber, new { @class = "form-control1" })
                        </div>
                        <!--<div class="col-sm-2">
                            <p class="help-block">Your help text!</p>
                        </div>-->
                    </div>
                    <div class="form-group">
                        @Html.LabelFor(model=>model.Email, new { @class = "col-sm-2 control-label" })
                        <div class="col-sm-8">
                            @Html.TextBoxFor(model => model.Email, new { @class = "form-control1" })
                        </div>
                        <!--<div class="col-sm-2">
                            <p class="help-block">Your help text!</p>
                        </div>-->
                    </div>
                    <div class="form-group">
                        @Html.LabelFor(model=>model.ReferredId, new { @class = "col-sm-2 control-label" })
                        <div class="col-sm-8">
                            @Html.DropDownListFor(model => model.ReferredId, Model.ReferredDoctors, new { @class = "form-control1" })
                        </div>

                    </div>
                    <br />
                      <div class="horz-grid">
                        <div class="grid-hor">
                            <h4 id="grid-example-mixed-complete">Selected Tests</h4>

                        </div>
                        <!----> <div class="row show-grid">
                            <div class="col-md-1">SR.no</div>
                            <div class="col-xs-6 col-sm-4">Test Name</div>
                            <div class="col-md-1">Rate</div>

                        </div>
                        <div id="SelectedTests">
                       
                        <div class="row show-grid">
                            <div class="col-md-1">1</div>
                            <div class="col-xs-6 col-sm-4">Blood Sugar</div>
                            <div class="col-md-1">Rs.300/=</div>
                            <div class="col-md-1"> &nbsp; &nbsp;<input type="checkbox"></div>

                        </div>
                            </div>

                    </div>
                    <br />
                    <div class="form-group">
                        <div class="col-sm-8">
                            <h4>Select Tests</h4>
                        </div>

                    </div>
                    <div class="form-group">
                        @Html.LabelFor(model=>model.DeptId, new { @class = "col-sm-2 control-label" })
                        <div class="col-sm-8">
                            @Html.DropDownListFor(model => model.DeptId, Model.Departments, new { @class = "form-control1" })
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="selector1" class="col-sm-2 control-label">Select SubCategory</label>
                        <div class="col-sm-8">
                            <select name="selector1" id="subcategories" class="form-control1">
                               

                            </select>
                        </div>
                    </div>

                    <div class="horz-grid">
                        <div class="grid-hor">
                            <h4 id="grid-example-mixed-complete">Tests List</h4>

                        </div>
                        <!----> <div class="row show-grid">
                            <div class="col-md-1">SR.no</div>
                            <div class="col-xs-6 col-sm-4">Test Name</div>
                            <div class="col-md-1">Rate</div>
                            <div class="col-md-1">Add</div>

                        </div>
                        <div id="Tests">
                       
                        <div class="row show-grid">
                            <div class="col-md-1">1</div>
                            <div class="col-xs-6 col-sm-4">Blood Sugar</div>
                            <div class="col-md-1">Rs.300/=</div>
                            <div class="col-md-1"> &nbsp; &nbsp;<input type="checkbox"></div>

                        </div>
                        <div class="row show-grid">
                            <div class="col-md-1">2</div>
                            <div class="col-xs-6 col-sm-4">Urine</div>
                            <div class="col-md-1">Rs.200/=</div>
                            <div class="col-md-1"> &nbsp; &nbsp;<input type="checkbox"></div>
                            <!-- Optional: clear the XS cols if their content doesn't match in height -->

                        </div>
                            </div>

                    </div>


                    <div class="col-sm-2 login-do" style="margin-left:40%">
                        <label class="hvr-shutter-in-horizontal login-sub">
                            <input type="submit" value="Submit" onclick="window.location='signup.html';" />
                        </label>
                    </div>
                    <script>
                        $('#DeptId').change(function(){
                            var deptId = $('#DeptId').val();
                            getSubCategory(deptId);
                        });
                        $('#subcategories').change(function(){
                            var SubCatId = $('#subcategories').val();
                            getTests(SubCatId);
                        });
                        
                        function getTests(SubCatId){
                            $.ajax({
                                type: 'POST',
                                url: "@Url.Action("GetTests","Reciptionist")",
                                data: {Id : SubCatId},
                            dataType: "json",
                            success : function(data){
                                $('#Tests').empty();
                                for(var i = 0; i < data.length; i++){
                                    $('#Tests').append("<div class='row show-grid'> <div class='col-md-1'>"+data[i].Id+"</div> <div class='col-xs-6 col-sm-4'>"+data[i].TestSubcategoryName+"</div><div class='col-md-1'>Rs."+data[i].Rate+"/=</div><div class='col-md-1'> &nbsp; &nbsp;<input type='checkbox' onclick='addTest("+data[i].Id+")'></div></div>");
                                    PatientTests[data[i].Id] = {
                                        TestName: data[i].TestSubcategoryName,
                                        Rate : data[i].Rate
                                    };
                                }
                            }
                        });
                        }
                        
                        var PatientTests = [];
                        var SelectedPatientTests = [];
                        
                        function addTest(Id){
                            var IsIdExist = false;
                            for (var i = 0; i < SelectedPatientTests.length; i++) {
                                if (SelectedPatientTests[i]==Id) {
                                    IsIdExist = true;
                                    SelectedPatientTests.slice(i,1);
                                    break;
                                }
                            }
                                if(!IsIdExist){
                                    $('#SelectedTests').append("<div class='row show-grid'> <div class='col-md-1'>"+Id+"</div> <div class='col-xs-6 col-sm-4'>"+PatientTests[Id].TestName+"</div><div class='col-md-1'>Rs."+PatientTests[Id].Rate+"/=</div><div class='col-md-1'> &nbsp;</div></div>");
                                    SelectedPatientTests.push(Id);
                                }
                        }

                        function getSubCategory(deptId){

                            $.ajax({
                                    type: 'POST',
                                    url: "@Url.Action("GetSubCategory","Reciptionist")",
                                    data: {Id : deptId},
                                    dataType: "json",
                                    success : function(data){
                                        $('#subcategories').empty();
                                        for(var i=0;i<data.length;i++){
                                            $('#subcategories').append('<option value="'+data[i].Id+'" >'+data[i].Name+'</option>');
                                        }
                                }
                            });
                        }
                    </script>

                    <div class="clearfix"> </div>
                </form>
            </div>
        </div>
    </div>
</div>
<br /><br /><br />

            </div>
        </div>
<!--//grid-->
<!---->
<!--//content-->
<!---->
@*------------- End Main Content Code-------------*@